"use strict";angular.module("demoApp",["ngResource","ngRoute","ngTouch","ngAnimate","ngFx","angular-carousel"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/analytical",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/products",{templateUrl:"views/products.html",controller:"ProductsCtrl"}).when("/recommendation",{templateUrl:"views/recommendation.html",controller:"RecommendationCtrl"}).when("/product/:id",{templateUrl:"views/product.html",controller:"ProductCtrl"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/agro",{templateUrl:"views/agro.html",controller:"AgroCtrl"}).when("/training",{templateUrl:"views/training.html",controller:"TrainingCtrl"}).when("/exports",{templateUrl:"views/exports.html",controller:"ExportsCtrl"}).when("/recommend/:id",{templateUrl:"views/recommend.html",controller:"RecommendCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("demoApp").controller("MainCtrl",["$scope",function(a){function b(a){var b,c;return"x"===a?(b=e.clientWidth,c=window.innerWidth):"y"===a&&(b=e.clientHeight,c=window.innerHeight),c>b?c:b}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b){this.el=a,this.options=c({},this.options),c(this.options,b),this._init()}a.texts=[{title:"THE PIONEERS OF MICRONUTRIENT TECHNOLOGY IN INDIA",link:"#/profile"},{title:"OUR VISION: PRODUCTS THAT WORK.",link:"#/products"},{title:"OUR WORK: EDUCATING THE FARMERS.",link:"#/recommendation"}],a.headCaption=a.texts[0].title,a.pageLink=a.texts[0].link,a.gotoBottom=function(){return $("#boxgallery").animate({scrollTop:$(this).offset().top+"px"},"fast"),this};var e=window.document.documentElement,f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},g=f[Modernizr.prefixed("transition")],h={transitions:Modernizr.csstransitions},i={width:b("x"),height:b("y")};d.prototype.options={},d.prototype._init=function(){this._setTransforms(),this.effect=this.el.getAttribute("data-effect")||"effect-1",this.isAnimating=!1,this.panels=[].slice.call(this.el.querySelectorAll(".panel")),this.panelsCount=4,this.panelCount=3,this.current=0,classie.add(this.panels[0],"current");var a=this;this.panels.forEach(function(b){for(var c=b.querySelector("img"),d="",e=0;e<a.panelsCount;++e)d+='<div class="bg-tile"><div class="bg-img"><img src="'+c.src+'" /></div></div>';b.removeChild(c),b.innerHTML=d+b.innerHTML}),this.nav=document.createElement("nav"),this.nav.innerHTML='<span class="prev"><i></i></span><span class="next"><i></i></span>',this.el.appendChild(this.nav),this._initEvents()},d.prototype._setTransforms=function(){this.transforms={"effect-1":{next:["translate3d(0, "+(i.height/2+10)+"px, 0)","translate3d(-"+(i.width/2+10)+"px, 0, 0)","translate3d("+(i.width/2+10)+"px, 0, 0)","translate3d(0, -"+(i.height/2+10)+"px, 0)"],prev:["translate3d("+(i.width/2+10)+"px, 0, 0)","translate3d(0, "+(i.height/2+10)+"px, 0)","translate3d(0, -"+(i.height/2+10)+"px, 0)","translate3d(-"+(i.width/2+10)+"px, 0, 0)"]},"effect-2":{next:["translate3d(-"+(i.width/2+10)+"px, 0, 0)","translate3d("+(i.width/2+10)+"px, 0, 0)","translate3d(-"+(i.width/2+10)+"px, 0, 0)","translate3d("+(i.width/2+10)+"px, 0, 0)"],prev:["translate3d(0,-"+(i.height/2+10)+"px, 0)","translate3d(0,-"+(i.height/2+10)+"px, 0)","translate3d(0,"+(i.height/2+10)+"px, 0)","translate3d(0,"+(i.height/2+10)+"px, 0)"]},"effect-3":{next:["translate3d(0,"+(i.height/2+10)+"px, 0)","translate3d(0,"+(i.height/2+10)+"px, 0)","translate3d(0,"+(i.height/2+10)+"px, 0)","translate3d(0,"+(i.height/2+10)+"px, 0)"],prev:["translate3d(0,-"+(i.height/2+10)+"px, 0)","translate3d(0,-"+(i.height/2+10)+"px, 0)","translate3d(0,-"+(i.height/2+10)+"px, 0)","translate3d(0,-"+(i.height/2+10)+"px, 0)"]}}},d.prototype._initEvents=function(){var a=this,b=this.nav.children;b[0].addEventListener("click",function(){a._navigate("prev")}),b[1].addEventListener("click",function(){a._navigate("next")}),window.addEventListener("resize",function(){a._resizeHandler()})},d.prototype._navigate=function(b){if(this.isAnimating)return!1;this.isAnimating=!0;var c=this,d=this.panels[this.current];"next"===b?(this.current=this.current<this.panelCount-1?this.current+1:0,a.headCaption=a.texts[this.current].title,a.pageLink=a.texts[this.current].link,console.log(a.headCaption),a.$evalAsync(function(a){console.log(a.headCaption)})):(this.current=this.current>0?this.current-1:this.panelCount-1,a.headCaption=a.texts[this.current].title,a.pageLink=a.texts[this.current].link,console.log(a.headCaption),a.$evalAsync(function(a){console.log(a.headCaption)}));var e=this.panels[this.current];classie.add(e,"active"),this._applyTransforms(d,b);var f=0,i=function(a){return a&&!classie.has(a.target,"bg-img")?!1:(++f,f<c.panelsCount?!1:(h.transitions&&this.removeEventListener(g,i),classie.remove(d,"current"),classie.add(e,"current"),c._resetTransforms(d),classie.remove(e,"active"),void(c.isAnimating=!1)))};h.transitions?d.addEventListener(g,i):i()},d.prototype._applyTransforms=function(a,b){var c=this;[].slice.call(a.querySelectorAll("div.bg-img")).forEach(function(a,d){a.style.WebkitTransform=c.transforms[c.effect][b][d],a.style.transform=c.transforms[c.effect][b][d]})},d.prototype._resetTransforms=function(a){[].slice.call(a.querySelectorAll("div.bg-img")).forEach(function(a){a.style.WebkitTransform="none",a.style.transform="none"})},d.prototype._resizeHandler=function(){function a(){b._resize(),b._resizeTimeout=null}var b=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(a,50)},d.prototype._resize=function(){i.width=b("x"),i.height=b("y"),this._setTransforms()},new d(document.getElementById("boxgallery"))}]),angular.module("demoApp").controller("AboutCtrl",["$scope","$window",function(){Shadowbox.init({handleOversize:"drag",modal:!0})}]),angular.module("demoApp").controller("NavCtrl",["$scope",function(a){var b=(document.getElementById("trigger-overlay"),document.querySelector("div.overlay")),c=(b.querySelector("button.overlay-close"),{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}),d=c[Modernizr.prefixed("transition")],e={transitions:Modernizr.csstransitions};a.toggleMenu=function(){if(classie.has(b,"open")){classie.remove(b,"open"),classie.add(b,"close");var a=function(c){if(e.transitions){if("visibility"!==c.propertyName)return;this.removeEventListener(d,a)}classie.remove(b,"close")};e.transitions?b.addEventListener(d,a):a()}else classie.has(b,"close")||classie.add(b,"open")},a.awesome=function(){classie.remove(b,"open")}}]),angular.module("demoApp").directive("grid",["$window",function(a){return{restrict:"A",link:function(b,c){b.initializeMargin=function(){var b=a.innerHeight;c.css("margin-top",b+"px"),$(".effect-sarah").css("height",b/2)},b.initializeMargin(),angular.element(a).bind("resize",function(){b.initializeMargin(),b.$apply()})}}}]),angular.module("demoApp").directive("resizable",["$window",function(a){return{restrict:"A",link:function(b,c,d){b.initializeVideoSize=function(){d.$set("width",a.innerWidth-2),d.$set("height",a.innerHeight-1.5)},b.initializeVideoSize(),angular.element(a).bind("resize",function(){b.initializeVideoSize(),b.$apply()})}}}]),angular.module("demoApp").controller("ProductsCtrl",["$scope","$http",function(a,b){var c=40;$(".title_items").click(function(){var a=$(this).next().find("li");if($(this).toggleClass("active"),a.toggleClass("visible"),$(this).hasClass("active"))for(var b=0;b<=a.length;b++)$(a[b]).css("transition-delay",c*b+"ms");else for(var b=a.length,d=-1;b>=0;b--,d++)$(a[b]).css("transition-delay",c*d+"ms")}),$("#cbp-vm input[name='type']").click(function(){var b=$(".title_items").next().find("li");$(b).toggleClass("active"),b.toggleClass("visible"),a.$evalAsync(function(a){console.log("$evalAsync"),a.q=$("input:radio[name=type]:checked").val()})}),function(){function a(){d.forEach(function(a){a.addEventListener("click",function(a){a.preventDefault(),b(this)},!1)})}function b(a){d.forEach(function(a){classie.remove(c,a.getAttribute("data-view")),classie.remove(a,"cbp-vm-selected")}),classie.add(c,a.getAttribute("data-view")),classie.add(a,"cbp-vm-selected")}var c=document.getElementById("cbp-vm"),d=Array.prototype.slice.call(c.querySelectorAll("div.cbp-vm-options > a"));a()}(),b.get("data/Product_All.json").success(function(b){a.data=b}).error(function(){return alert("There is error occured while fetching data"),null}),a.q="All",a.isActive=function(b){var c=a.q;return"All"===a.q?(console.log(c),!0):a.q===b.Type?(console.log(b.Type),!0):!1},a.toggle=!1,a.toggleB=function(){a.toggle=!a.toggle}}]),angular.module("demoApp").controller("RecommendationCtrl",["$scope","$timeout","$http","$location",function(a,b,c,d){a.changeLocation=function(){var a=this;console.log(this);var b=$(a).parent().parent(),c=$(b).width()/1.5;$(b).animate({opacity:0,marginLeft:-c},500)},c.get("data/recommendation.json").success(function(b){a.data=b,console.log(a.data)}).error(function(){return alert("There is error occured while fetching data"),null}),b(function(){a.foods=["apple","muffin","chips"],$(".remove-goods").bind("click",function(a){a.preventDefault();var b=this,c=$(b).parent().parent(),d=$(c).width()/1.5;$(c).animate({opacity:0,marginLeft:-d},500);var e=150,f=150,g=$(c).nextAll(),h=$(c).prevAll();g.each(function(a,b){setTimeout(function(){$(b).animate({opacity:0,marginLeft:-d},500,function(){})},e),e+=100}),h.each(function(a,b){setTimeout(function(){$(b).animate({opacity:0,marginLeft:-d},500,function(){})},f),f+=100})})},100),b(function(){$(".remove-goods").bind("click",function(a){a.preventDefault();var b=this,c=$(b).parent().parent(),d=$(c).width()/1.5;$(c).animate({opacity:0,marginLeft:-d},500);var e=150,f=150,g=$(c).nextAll(),h=$(c).prevAll();g.each(function(a,b){setTimeout(function(){$(b).animate({opacity:0,marginLeft:-d},500,function(){})},e),e+=100}),h.each(function(a,b){setTimeout(function(){$(b).animate({opacity:0,marginLeft:-d},500,function(){})},f),f+=100})})},200),a.changeLocation=function(a){d.path("/recommend/"+a)}}]),angular.module("demoApp").directive("animatediv",["$window","$location","$timeout",function(a,b,c){return function(d,e,f){e.bind("click",function(){console.log(f.change),console.log(this.getBoundingClientRect()),$(this).css({position:"fixed",top:this.getBoundingClientRect().top+"px",left:this.getBoundingClientRect().left+"px","z-index":"2","text-indent":"-9999px"}),TweenMax.to(e,1,{width:a.innerWidth,height:a.innerHeight,top:0,left:0}),TweenMax.to("#cbp-vm",1,{opacity:0}),TweenMax.to(e,2,{opacity:0}),c(function(){b.path(f.change)},1e3)})}}]),angular.module("demoApp").controller("ProductCtrl",["$scope","$http",function(a,b){b.get("data/borocol12.json").success(function(b){a.data=b}).error(function(){return alert("There is error occured while fetching data"),null})}]),angular.module("demoApp").controller("ProfileCtrl",["$scope","$window",function(a,b){a.initializeMargin=function(){var a=b.innerHeight;$(".effect-sarah").css("height",a/2)},a.initializeMargin(),angular.element(b).bind("resize",function(){scope.initializeMargin(),scope.$apply()})}]),angular.module("demoApp").controller("AgroCtrl",["$scope",function(){Shadowbox.init({handleOversize:"drag",modal:!0})}]),angular.module("demoApp").controller("TrainingCtrl",["$scope",function(){Shadowbox.init({handleOversize:"drag",modal:!0})}]),angular.module("demoApp").controller("ExportsCtrl",["$scope",function(){Shadowbox.init({handleOversize:"drag",modal:!0})}]),angular.module("demoApp").factory("getJson",["$http",function(a){var b={getProduct:function(){var b=a.get("data/products.json").success(function(a){return a}).error(function(){return alert("There is error occured while fetching farmer data"),null});return b}};return b}]),angular.module("demoApp").directive("wrapOwlcarousel",function(){return{restrict:"E",link:function(a,b){var c=a.$eval($(b).attr("data-options"));console.log("options "+c),$(b).owlCarousel(c)}}}),angular.module("demoApp").controller("RecommendCtrl",["$scope","$http",function(a,b){Shadowbox.init({handleOversize:"drag",modal:!0}),b.get("data/Pulses.json").success(function(b){a.data=b,console.log(a.data)}).error(function(){return alert("There is error occured while fetching data"),null})}]);